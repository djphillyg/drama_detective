import pytest
from unittest.mock import patch
from drama_detective.agents.analysis_agent import AnalysisAgent

def test_generate_analysis():
    # TODO: Create agent
    # Mock response with complete analysis (timeline, facts, verdict, drama_rating)
    # Create session_data dict
    # Call generate_analysis(session_data)
    # Assert analysis has all required sections
    # Assert verdict has drama_rating
    pass